// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(uuid())
  nombre        String
  email         String   @unique
  password      String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  isActive      Boolean  @default(true)
  emailVerified Boolean  @default(false)

  checks Check[]

  @@map("users")
}

model Check {
  id                   String   @id @default(uuid())
  userId               String
  url                  String
  name                 String?
  interval             String   // '5min', '1hour', '1day'
  regions              String[] // ['sao-paulo', 'new-york', 'frankfurt']
  status               String   @default("active") // 'active', 'paused', 'failed'
  timeout              Int      @default(30) // segundos
  expectedStatusCode   Int      @default(200)
  lastCheckAt          DateTime?
  lastStatus           String?  // 'up', 'down', 'timeout'
  failureCount         Int      @default(0)
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  
  user                 User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("checks")
}